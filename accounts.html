<!DOCTYPE html>
<html>
  <head>
    <title>Firebase Upload Test</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
  </head>
  <body style="background:black; color:white; text-align:center;">
    <h2>Select Image to Upload</h2>
    <input type="file" id="fileInput" accept="image/*"><br><br>
    <button onclick="uploadImage()">Upload</button>
    <p id="status"></p>

    <script>
      // Your Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyD1YgjFsxh-xZfeHlrxt_0igmH6SBIMcuc",
        authDomain: "void-d9ec4.firebaseapp.com",
        databaseURL: "https://void-d9ec4-default-rtdb.firebaseio.com",
        projectId: "void-d9ec4",
        storageBucket: "void-d9ec4.appspot.com", // corrected this!
        messagingSenderId: "267268035851",
        appId: "1:267268035851:web:1e5ab79c51db42160f3e0e",
        measurementId: "G-ZYMQ3Z6LC5"
      };

      firebase.initializeApp(firebaseConfig);
      const storage = firebase.storage();

      function uploadImage() {
        const file = document.getElementById("fileInput").files[0];
        if (!file) {
          alert("No file selected");
          return;
        }

        const reader = new FileReader();
        reader.onloadend = function () {
          const base64String = reader.result;
          const fileRef = storage.ref('uploads/' + Date.now() + '.jpg');
          fileRef.putString(base64String, 'data_url')
            .then(snapshot => {
              document.getElementById("status").textContent = "Upload success!";
              console.log("Uploaded:", snapshot.metadata.fullPath);
            })
            .catch(error => {
              console.error(error);
              document.getElementById("status").textContent = "Upload failed.";
            });
        };
        reader.readAsDataURL(file);
      }
    </script>
  </body>
</html>

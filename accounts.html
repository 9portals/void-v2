<!DOCTYPE html>
<html>
<head>
  <title>Firebase Upload Test</title>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-storage-compat.js"></script>
</head>
<body style="background:black;color:white;text-align:center;">
  <h2>Upload Profile Picture</h2>
  <input type="file" id="fileInput" />
  <button onclick="uploadPic()">Upload</button>
  <br><br>
  <img id="preview" src="#" style="display:none;width:100px;height:100px;border-radius:50%;" />

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD1YgjFsxh-xZfeHlrxt_0igmH6SBIMcuc",
      authDomain: "void-d9ec4.firebaseapp.com",
      projectId: "void-d9ec4",
      storageBucket: "void-d9ec4.appspot.com",
      appId: "1:267268035851:web:d535fe4175c06f170f3e0e"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const storage = firebase.storage();

    // Log in for testing
    auth.signInWithEmailAndPassword("test@example.com", "yourTestPassword").catch(console.error);

    function uploadPic() {
      const file = document.getElementById("fileInput").files[0];
      const user = auth.currentUser;

      if (!user || !file) return alert("Login and select a file first!");

      const ref = storage.ref("profilePics/" + user.uid);
      ref.put(file).then(() => {
        return ref.getDownloadURL();
      }).then(url => {
        document.getElementById("preview").src = url;
        document.getElementById("preview").style.display = "block";
        console.log("Uploaded & previewed:", url);
      }).catch(err => alert("Upload failed: " + err.message));
    }
  </script>
</body>
</html>

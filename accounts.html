<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VOID — Account</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: black;
      color: white;
    }

    header {
      padding: 20px;
      text-align: center;
      background-color: #111;
      font-size: 28px;
      font-weight: bold;
      border-bottom: 1px solid #444;
    }

    .toggle-container {
      text-align: center;
      margin: 20px 0;
    }

    .hidden { display: none; }

    .form-group {
      margin: 10px auto;
      width: 80%;
      max-width: 400px;
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      background-color: #222;
      color: white;
      border: 1px solid #444;
      border-radius: 4px;
    }

    button {
      padding: 10px 20px;
      margin-top: 10px;
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #555;
    }

    #profilePic {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 50%;
      cursor: pointer;
    }

    #fullPic {
      max-width: 90vw;
      max-height: 90vh;
      display: none;
      margin: 20px auto;
    }

    #statusTag {
      font-size: 12px;
      margin-top: 5px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <header>VOID — Account</header>

  <div class="toggle-container">
    <button onclick="toggleForm(true)">Login</button>
    <button onclick="toggleForm(false)">Sign Up</button>
  </div>

  <div id="loginForm" class="form-group">
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPassword" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <div id="signupForm" class="form-group hidden">
    <input type="email" id="signupEmail" placeholder="Email">
    <input type="password" id="signupPassword" placeholder="Password">
    <input type="text" id="signupUsername" placeholder="Username">
    <button onclick="signup()">Sign Up</button>
  </div>

  <div id="profileView" class="form-group hidden">
    <img id="profilePic" src="https://via.placeholder.com/120" onclick="toggleFullPic()" />
    <img id="fullPic" src="" />
    <div id="statusTag">Status: Unverified</div>
    <p><strong>Name:</strong> <span id="displayName">—</span></p>
    <p><strong>Age:</strong> <span id="displayAge">—</span></p>
    <p><strong>Gender:</strong> <span id="displayGender">—</span></p>
    <p><strong>Bio:</strong> <span id="displayBio">—</span></p>
    <button onclick="showEditProfile()">Edit Profile</button>
  </div>

  <div id="editProfile" class="form-group hidden">
    <input type="text" id="name" placeholder="Name">
    <input type="number" id="age" placeholder="Age">
    <select id="gender">
      <option value="">Select Gender</option>
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>
    <textarea id="bio" placeholder="Bio"></textarea>
    <input type="file" id="picUpload" accept="image/*" />
    <button onclick="saveProfile()">Save Profile</button>
    <button onclick="cancelEdit()">Cancel</button>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-storage-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD1YgjFsxh-xZfeHlrxt_0igmH6SBIMcuc",
    authDomain: "void-d9ec4.firebaseapp.com",
    databaseURL: "https://void-d9ec4-default-rtdb.firebaseio.com",
    projectId: "void-d9ec4",
    storageBucket: "void-d9ec4.appspot.com",
    messagingSenderId: "267268035851",
    appId: "1:267268035851:web:d535fe4175c06f170f3e0e"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();
  const storage = firebase.storage();

  function toggleForm(isLogin) {
    document.getElementById("loginForm").classList.toggle("hidden", !isLogin);
    document.getElementById("signupForm").classList.toggle("hidden", isLogin);
  }

  function signup() {
    const email = document.getElementById("signupEmail").value;
    const password = document.getElementById("signupPassword").value;
    const username = document.getElementById("signupUsername").value;
    auth.createUserWithEmailAndPassword(email, password).then(userCred => {
      const uid = userCred.user.uid;
      return db.ref("users/" + uid).set({
        email,
        username,
        name: "",
        age: "",
        gender: "",
        bio: "",
        picURL: "",
        verified: false
      }).then(() => {
        userCred.user.sendEmailVerification();
        showProfile(uid);
      });
    }).catch(console.error);
  }

  function login() {
    const email = document.getElementById("loginEmail").value;
    const password = document.getElementById("loginPassword").value;
    auth.signInWithEmailAndPassword(email, password).then(userCred => {
      showProfile(userCred.user.uid);
    }).catch(console.error);
  }

  function showProfile(uid) {
    document.getElementById("loginForm").classList.add("hidden");
    document.getElementById("signupForm").classList.add("hidden");

    db.ref("users/" + uid).once("value").then(snapshot => {
      const data = snapshot.val();
      const user = auth.currentUser;
      const verified = user.emailVerified;

      document.getElementById("statusTag").innerText = verified
        ? "Status: Verified (Full Access)"
        : "Status: Verify your email for full access";

      document.getElementById("displayName").innerText = data.name || "—";
      document.getElementById("displayAge").innerText = data.age || "—";
      document.getElementById("displayGender").innerText = data.gender || "—";
      document.getElementById("displayBio").innerText = data.bio || "—";
      document.getElementById("profilePic").src = data.picURL || "https://via.placeholder.com/120";
      document.getElementById("fullPic").src = data.picURL || "";

      document.getElementById("profileView").classList.remove("hidden");
    });
  }

  function showEditProfile() {
    document.getElementById("profileView").classList.add("hidden");
    document.getElementById("editProfile").classList.remove("hidden");
  }

  function cancelEdit() {
    document.getElementById("editProfile").classList.add("hidden");
    document.getElementById("profileView").classList.remove("hidden");
  }

  function saveProfile() {
    const name = document.getElementById("name").value;
    const age = document.getElementById("age").value;
    const gender = document.getElementById("gender").value;
    const bio = document.getElementById("bio").value;
    const uid = auth.currentUser.uid;
    const file = document.getElementById("picUpload").files[0];

    if (file) {
      const ref = storage.ref("profilePics/" + uid);
      ref.put(file).then(snapshot => {
        snapshot.ref.getDownloadURL().then(url => {
          db.ref("users/" + uid).update({ name, age, gender, bio, picURL: url }).then(() => {
            showProfile(uid);
            document.getElementById("editProfile").classList.add("hidden");
          });
        });
      }).catch(console.error);
    } else {
      db.ref("users/" + uid).update({ name, age, gender, bio }).then(() => {
        showProfile(uid);
        document.getElementById("editProfile").classList.add("hidden");
      });
    }
  }

  function toggleFullPic() {
    const full = document.getElementById("fullPic");
    full.style.display = full.style.display === "none" ? "block" : "none";
  }

  auth.onAuthStateChanged(user => {
    if (user) showProfile(user.uid);
  });
</script>
